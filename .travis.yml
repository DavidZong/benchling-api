language: python
python:
- '3.4'
- '3.5'
- 3.5-dev
- '3.6'
- 3.6-dev
- 3.7-dev
- nightly
install:
- pip install .
before_install:
- openssl aes-256-cbc -K $encrypted_1b322a262dd5_key -iv $encrypted_1b322a262dd5_iv
  -in tests/secrets/config.json.enc -out tests/secrets/config.json -d
- pip install lxml
- pip install pyandoc
- pip install pytest pytest-cov
- pip install coveralls
after_install:
- pandoc --from=markdown --to=rst --output=README README.md
script:
- py.test --cov benchlingapi --cov-report term-missing
after_success:
- coveralls
deploy:
  provider: pypi
  user: jvrana
  password:
    secure: qERLO7HdFP4s+vhruf8jI8H01Q84N+sBYPq/InifaSXlrAq+Jozx4rgjJMD3GO7nxBJhmO1oM+iVsfpE5c7Xf60il/gBVMZDKHeUZN1GWKMxoQWF9haQ8y2/c+Z97bHFnDFNdtnvMIib6mWYlzKkEu64svZeBACBwVA7SIgLtc8IFEJzZFXYPYAB5zOKJ8wmi6etUdhCKbsUfJY9lV6ObGztQzn65V2N9bPP5DDgLnMkdtfPC7S+g8MQF9wl2dAgodAG5lr882v1mq+7OQHkibE+CsJWQ/QRuOc+dSdkPKNJKxqiDlVBp9xUqc98UiKgZRRSpfADELaFXt9kH7bq/yGPDGpFgNmUPDwPT/QKZXZACdQPqhZuGhfp8u+Ve86tJ+bO0gdKMGq8gn8G6t/ROGeLDrYQazroS5gfHAzdj9TZj9MJv3HXIruxOCGw5bhFPvTXVzvqaVfMGd9x+nLVHwsLrqA+AJ39SAP4F0aDcEQtweEhUv1DEGmvC2BJbrVf6aRAXZ+s5arqfq4B0R4hZqCxtXLUtJae6ssuM0dZF8vwUDQGMyMIMLd+c4ySdcUNkGUXdbkpwmlDayb5MA8IkwFFVF3CQ2j0MmElgMfpmXeKHo+4+89ChqsnlsL6177MRyfH/3H2AOxqf5LwdueW1VDtEza/+saDruwNZqiDK3g=
  on:
    tags: true
    branch: master
